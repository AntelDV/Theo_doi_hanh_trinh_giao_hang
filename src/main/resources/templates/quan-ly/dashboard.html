<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:replace="~{layout :: head(pageTitle='Dashboard Admin')}"></head>
<body>
    <div class="app-wrapper">
        <nav th:replace="~{layout :: sidebar}"></nav>
        <div class="main-content">
            <header th:replace="~{layout :: topbar}"></header>
            <main class="page-content">
                <h1 class="page-header">Tổng quan Hệ thống</h1>
                <div class="row">
                    <div class="col-md-3">
                        <div class="card-counter primary">
                            <div class="h5" th:text="${totalOrders}">0</div>
                            <div class="small text-primary">Đơn hàng</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card-counter success">
                            <div class="h5" th:text="${#numbers.formatCurrency(totalRevenue)}">0</div>
                            <div class="small text-success">Doanh thu</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card-counter info">
                            <div class="h5" th:text="${totalShippers}">0</div>
                            <div class="small text-info">Shipper</div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card-counter warning">
                            <div class="h5" th:text="${waitingOrders}">0</div>
                            <div class="small text-warning">Chờ xử lý</div>
                        </div>
                    </div>
                </div>

                <div class="row mt-3">
                    <div class="col-md-8">
                        <div class="card" style="height: 400px;">
                            <div class="card-header">Thống kê Đơn hàng</div>
                            <div class="card-body">
                                <canvas id="orderChart"></canvas>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <div class="card" style="height: 400px;">
                            <div class="card-header">Ghi chú</div>
                            <div class="card-body">
                                <p>Dữ liệu được cập nhật thời gian thực.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <script th:src="@{/js/main.js}"></script>
    <script th:inline="javascript">
        document.addEventListener("DOMContentLoaded", function() {
            var ctx = document.getElementById("orderChart");
            if(ctx) {
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: /*[[${chartLabels}]]*/ [],
                        datasets: [{
                            label: 'Số lượng',
                            data: /*[[${chartData}]]*/ [],
                            backgroundColor: '#4e73df'
                        }]
                    },
                    options: { maintainAspectRatio: false }
                });
            }
        });
    </script>
</body>
</html>